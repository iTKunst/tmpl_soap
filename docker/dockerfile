FROM maven:3.6.3-jdk-11

USER root

ARG CONT_DIR
ARG HOST_DIR
ARG SYS_DIR
ARG TMPL_DIR

RUN echo CONT_DIR is ${CONT_DIR}
RUN echo HOST_DIR is ${HOST_DIR}
RUN echo SYS_DIR is ${SYS_DIR}
RUN echo TMPL_DIR is ${TMPL_DIR}

RUN mkdir -p ${CONT_DIR}
WORKDIR ${CONT_DIR}

COPY ${SYS_DIR}/maven/settings.xml /home/maven/.m2

RUN mkdir -p src/main/resources/wsdl
COPY ${SYS_DIR}/soap/*.wsdl ./src/main/resources/wsdl

COPY ${TMPL_DIR}/mvn/pom.xml ./

ENV ART $ART
ENV FILE $FILE
ENV GRP $GRP
ENV PKG $PKG
ENV VER $VER

#ENTRYPOINT ["mvn", "clean", "package"]

ENTRYPOINT ["/bin/sh"]
